<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My English Grammar & Progress Journal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>My English Grammar & Progress Journal</h1>
    <nav>
      <a href="#dashboard">Dashboard</a>
      <a href="#grammar-bank">Grammar Bank</a>
      <a href="#progress">Lesson History</a>
      <a href="program.html">Program</a>
    </nav>
  </header>

  <main>
    <!-- DASHBOARD -->
    <section id="dashboard">
      <h2>Dashboard</h2>
      <div class="grid grid-2">
        <div class="card">
          <h3>Current goal</h3>
          <div class="meta">From B1 to B2/C1 • Australia</div>
          <p><strong>Main focus:</strong> grammar & expression (speaking + writing).</p>
          <p><strong>Right now:</strong> tenses, word order, natural expressions.</p>
        </div>
        <div class="card">
          <h3>Quick overview</h3>
          <ul>
            <li>Total grammar sheets: <strong>2</strong> (manual)</li>
            <li>Total lessons done: <strong>2</strong> (manual)</li>
            <li>Last lesson topic: Present Perfect vs Past Simple</li>
            <li>Next thing to review: for / since / ago</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- GRAMMAR BANK LIST -->
    <section id="grammar-bank">
      <h2>Grammar Bank</h2>
      <p class="meta">The list below is automatically generated from the <code>grammar/</code> folder.</p>

      <!-- AUTO-LIST GRAMMAR FILES -->
      <div class="card">
        <h3>Grammar sheets</h3>
        <ul id="grammar-list">
          <li>Loading grammar files...</li>
        </ul>
      </div>

      <!-- TEMPLATE FICHE GRAMMATICALE -->
      <div class="card">
        <h3>Templates – Grammar sheets</h3>
        <p class="meta">Use this template to create a new grammar sheet after each lesson.</p>
        <ul>
          <li><a href="grammar/LEVEL-Grammar-template.html">Grammar sheet template</a></li>
        </ul>
      </div>
    </section>

    <!-- PROGRESS LIST -->
    <section id="progress">
      <h2>Lesson History</h2>
      <p class="meta">The list below is automatically generated from the <code>progress/</code> folder.</p>

      <!-- AUTO-LIST PROGRESS FILES -->
      <div class="card">
        <h3>Lessons</h3>
        <ul id="progress-list">
          <li>Loading lesson files...</li>
        </ul>
      </div>

      <!-- TEMPLATE FICHE DE SUIVI -->
      <div class="card">
        <h3>Templates – Lesson summaries</h3>
        <p class="meta">Use this template to write a summary at the end of each ChatGPT lesson.</p>
        <ul>
          <li><a href="progress/DD.MM.YY-LEVEL-Progress-template.html">Lesson summary template</a></li>
        </ul>
      </div>
    </section>
  </main>

  <!-- ========================== -->
  <!-- AUTO-GENERATION JAVASCRIPT -->
  <!-- ========================== -->

  <script>
    async function loadLinks(folder, elementId) {
      const user = "ThomasGrff";      // Ton pseudo GitHub
      const repo = "english_lessons"; // Nom du repo

      const apiUrl = `https://api.github.com/repos/${user}/${repo}/contents/${folder}`;

      try {
        const res = await fetch(apiUrl);
        const data = await res.json();

        const ul = document.getElementById(elementId);
        ul.innerHTML = "";

        data
          .filter(f => f.name.endsWith(".html") && !f.name.includes("template"))
          .forEach(f => {
            const li = document.createElement("li");
            const link = document.createElement("a");

            link.href = `${folder}/${f.name}`;
            link.textContent = f.name
              .replace(".html", "")
              .replace(/-/g, " ");

            li.appendChild(link);
            ul.appendChild(li);
          });
      } catch (err) {
        console.error(err);
        document.getElementById(elementId).innerHTML =
          "<li>Error loading files</li>";
      }
    }

    // Auto-load grammar & progress lists
    loadLinks("grammar", "grammar-list");
    loadLinks("progress", "progress-list");
  </script>

</body>
</html>
